<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Veri İşlemleri</title>
  </head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
    crossorigin="anonymous"
  />
  <body>
    <h1>Veri İşlemleri Sayfası</h1>

    <div class="row">
      <div class="col-md-6">
        <label>Metin giriniz: </label>
        <input
          type="text"
          class="form-control"
          id="textbox"
          placeholder="Metin girin"
        />
      </div>
      <div class="col-md-6">
        <button class="btn btn-warning">Gönder</button>
         <button class="btn btn-danger" id="tet">Sil</button>
      </div>
     
    <div class="row">
      <div id="maddeler">
        <ul></ul>
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"
  ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
  <script>
    function ekle(yenimadde) {
      $("#maddeler").append("<li>" + yenimadde.trim() + "</li>");
      document.location.reload();

      var key;
      for (var i = 0; ; i++) {
        var oldkey = "madde" + i;
        if (localStorage.getItem(oldkey) === null) {
          key = oldkey;
          break;
        }
      }
      localStorage.setItem(key, yenimadde);
    }

    function maddeGetir() {
      for (var i = 0; i < localStorage.length; i++) {
        var key = localStorage.key(i);
        var value = localStorage.getItem(key);

        $("#maddeler").append("<li>" + value + "</li>" + `<button class='btn btn-danger sil' key=${key}>Sil</button>`);
      }
    }
    $(document).ready(function () {
      maddeGetir();
    });
    $(document).on("click", ".btn-warning", function () {
      var yenimadde = $("#textbox").val();
      if (yenimadde.trim() != "") {
        ekle(yenimadde);
      } else {
        alert("Lütfen bir metin giriniz!");
      }

      //   var yenimadde = $("#textbox").val();
      //   if (yenimadde === "") {
      //     alert("Lütfen bir metin giriniz!");
      //     $("#textbox").focus();
      //   } else {
      //     $("#maddeler").append("<li>" + yenimadde + "</li>");
      //   }
      //   $("#textbox").val("").focus();
    });
    $(document).on("click", ".sil", sil);
    function sil() {
        var siralikey=$(this).attr("key");
        localStorage.removeItem(siralikey);
        $(this).parent().remove();

        //sondakini siliyor bu 
    //   if (localStorage.length > 0) {
    //     var key = localStorage.key(0);
    //     localStorage.removeItem(key);
    //   }
    }
    $(document).on("click", ".btn-danger", function () {
        
      sil();
      document.location.reload();
    });

    $(document).on("click", "#tet", function () {
      localStorage.clear();
      $("#maddeler").empty();
    });

    // ödev
    // form oluşturun
    // ad, soyad, yaş, email, telefon, adres, tc ekleyin
    // buton ile verileri ekleyin
    // butona tıklandığında
    // bilgileri local storage a kaydedin
    // sayfa yüklendiğinde local storagedaki verileri 
    // çekin ve düzenleme yapıldığında güncelleyin
    // fonksiyon kullanın
    // silme butonu ekleyin her kaydın yanında
    // hepsini sil ekleyebilirsiniz
    // jquery-bootstrap localden eklenecek
  </script>
</html>
